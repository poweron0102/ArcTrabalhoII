<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Trabalho II</title>
    <link href="common.css" rel="stylesheet">
    <link href="window.css" rel="stylesheet">
    <link href="desktop.css" rel="stylesheet">
    <script src="common.js"></script>
    <script src="window.js"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
<header>
    <a href="/">
        Trabalho II
    </a>

    <div class="login" id="LoginName">
            <span id="UserName">
                Nathan Pinheiro && Arthur Erthal
            </span>
        <button onclick="window.alert('Voc√™ esta presa nessa conta, logout n√£o √© permitido!')">
            Logout
        </button>
    </div>
</header>

<main id="main">
    <button class="desktop-icon">
        <img src="icons/w98_recycle_bin_full.ico" alt="recycle bin full">
        Recycle bin
    </button>


    <div class="window" style="width:640px;height:480px;" id="q-1">
        <h2 class="window-header"><div class="text"><span>Quest√£o 1</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=1=---------------------------->
            üëç
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-2">
        <h2 class="window-header"><div class="text"><span>Quest√£o 2</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=2=---------------------------->
            <h3>Cycles = 350</h3>
            <p>√â o n√∫mero de ciclos de rel√≥gio que o programa levou para completar sua execu√ß√£o.</p>

            <h3>Instructions = 201</h3>
            <p>√â o n√∫mero de instru√ß√µes executadas durante a execu√ß√£o do programa.</p>

            <h3>CPI = 1.741</h3> 
            <p>√â a a raz√£o entre o n√∫mero de ciclos e o n√∫mero de instru√ß√µes, que equivale ao n√∫mero m√©dio de ciclos do rel√≥gio que cada instru√ß√£o leva para ser executada.</p>

            <h3>Stalls = 105</h3>
            <p>A quantidade de ciclos do rel√≥gio em que a execu√ß√£o do programa foi atrasada para evitar os riscos da pipeline.</p>
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-3">
        <h2 class="window-header"><div class="text"><span>Quest√£o 3</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=3=---------------------------->
            <p>Houve 105 paradas por conflitos do tipo Read After Write.</p>
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-4">
        <h2 class="window-header"><div class="text"><span>Quest√£o 4</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=4=---------------------------->
            üëç
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-5">
        <h2 class="window-header"><div class="text"><span>Quest√£o 5</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=5=---------------------------->
            üëç
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-6">
        <h2 class="window-header"><div class="text"><span>Quest√£o 6</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=6=---------------------------->
            <h3>Cycles = 245</h3>
            <p>√â o n√∫mero de ciclos de rel√≥gio que o programa levou para completar sua execu√ß√£o.</p>

            <h3>Instructions = 201</h3>
            <p>√â o n√∫mero de instru√ß√µes executadas durante a execu√ß√£o do programa.</p>

            <h3>CPI = 1.218</h3>
            <p>√â a a raz√£o entre o n√∫mero de ciclos e o n√∫mero de instru√ß√µes, que equivale ao n√∫mero m√©dio de ciclos do
                rel√≥gio que cada instru√ß√£o leva para ser executada.</p>

            <h4>Stalls = 0</h4>
            <p>A quantidade de ciclos do rel√≥gio em que a execu√ß√£o do programa foi atrasada para evitar os riscos da
                pipeline.</p>
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-7">
        <h2 class="window-header"><div class="text"><span>Quest√£o 7</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=7=---------------------------->
            <p>Depois que o adiantamento foi acionado, n√£o houve nenhuma parada por conflito.</p>
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-8">
        <h2 class="window-header"><div class="text"><span>Quest√£o 8</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=8=---------------------------->
            <p>A quantidade de instru√ß√µes nos itens 2 e 6 foram a mesma, j√° que o algoritmo n√£o mudou. No item 6 n√£o houve paradas por conflito, em contraste com o item 2, onde aconteceram 105. Isso se d√° pelo mecanismo de adiantamento que permite que os dados pulem est√°gios da pipeline para evitar esperas. Como v√°rios ciclos de rel√≥gio foram perdidos em stalls no item 2, o n√∫mero de ciclos e, consequentemente, a CPI, foram bem menores no item 6.</p>
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-9">
        <h2 class="window-header"><div class="text"><span>Quest√£o 9</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=9=---------------------------->
            üëç
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-1011">
        <h2 class="window-header"><div class="text"><span>Quest√£o 10</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=10-11=---------------------------->
            <h3>Sem Adiantamento</h3>

            <h4>Instructions:</h4>
            <p>3 instru√ß√µes s√£o executadas inicialmente, 8 dentro do loop, e 1 instru√ß√£o de parada no final. O loop passa por uma itera√ß√£o para cada um dos 128 elementos do array. Portanto, temos que o n√∫mero de instru√ß√µes ser√°:</p>
            <p>\[
                {4}+({8}\times{128}) = 1028
                \]</p>

            <h4>Stalls:</h4>
            <pre>
main:
    DADDI R3,R0,8                ;1
    DADDI R1,R0,1024             ;2
    DADDI R2,R0,1024             ;3
Loop:
    L.D F0,0(R1)                 ;4
    MUL.D F0,F0,F2               ;5
    L.D F4,0(R2)                 ;6
    ADD.D F0,F0,F4               ;7
    S.D F0,0(R2)                 ;8
    DSUB R1,R1,R3                ;9
    DSUB R2,R2,R3                ;10
BNEZ R1,Loop                     ;11
HALT                             ;12
</pre>

            <p>Antes do loop<br>
                2 e 4: 1 ciclo (evit√°vel com forwarding)</p>

            <p>Dentro do Loop:<br>
                4 e 5: 2 ciclos. (1 evit√°vel com forwarding)<br>
                5 e 7: 7 ciclos. (2 s√£o evit√°veis com forwarding)<br>
                7 e 8: 5 ciclos  (2 s√£o evit√°veis com forwarding)<br>
                9 e 11: 1 ciclo (evit√°vel com forwarding)</p>

            <p>Total = 128 x (15) + 1 = 1921</p>

            <h4>Cycles</h4>
            <p>4 ciclos para encher a pipeline<br>
                1028 ciclos onde uma nova instru√ß√£o √© buscada<br>
                1921 ciclos onde ocorre um stall<br>
                1 ciclo de esvaziamento da pipeline para cada uma das 127 itera√ß√µes do loop em que R1 era diferente de zero.</p>

            <p>Total = 4 + 1028 + 1921 + 1*(128-1) = 3080 ciclos</p>

            <h4>CPI</h4>
            <p>\[
                \frac{3080}{1028} \approx 2.99
                \]</p>

            <h3>Com Adiantamento</h3>

            <h4>Instructions:</h4>
            <p>Mesma quantidade: 1028 instru√ß√µes.</p>

            <h4>Stalls:</h4>
            <pre>
main:
    DADDI R3,R0,8                ;1
    DADDI R1,R0,1024             ;2
    DADDI R2,R0,1024             ;3
Loop:
    L.D F0,0(R1)                 ;4
    MUL.D F0,F0,F2               ;5
    L.D F4,0(R2)                 ;6
    ADD.D F0,F0,F4               ;7
    S.D F0,0(R2)                 ;8
    DSUB R1,R1,R3                ;9
    DSUB R2,R2,R3                ;10
BNEZ R1,Loop                     ;11
HALT                             ;12
</pre>

            <p>Dentro do Loop:<br>
                4 e 5: 1 RAW<br>
                5 e 7: 5 RAW<br>
                5 e 7: 1 WAW<br>
                7 e 8: 3 RAW</p>

            <p>Total = 128 x (1+5+3) RAW + 128 x 1 WAW = 1152 RAW e 128 WAW = 1280 Stalls.</p>

            <h4>Cycles</h4>
            <p>4 ciclos para encher a pipeline<br>
                1028 ciclos onde uma nova instru√ß√£o √© buscada<br>
                1280 ciclos onde ocorre um stall<br>
                1 ciclo de esvaziamento da pipeline para cada uma das 127 itera√ß√µes do loop em que R1 era diferente de zero.</p>

            <p>Total = 4 + 1028 + 1280 + 1*(128-1) = 2439 ciclos.</p>

            <h4>CPI</h4>
            <p>\[
                \frac{2439}{1028} \approx 2.37
                \]</p>

        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-12">
        <h2 class="window-header"><div class="text"><span>Quest√£o 12</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=12=---------------------------->
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-13">
        <h2 class="window-header"><div class="text"><span>Quest√£o 13</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=13=---------------------------->
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-14">
        <h2 class="window-header"><div class="text"><span>Quest√£o 14</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=14=---------------------------->
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-15">
        <h2 class="window-header"><div class="text"><span>Quest√£o 15</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=15=---------------------------->
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-16">
        <h2 class="window-header"><div class="text"><span>Quest√£o 16</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=16=---------------------------->
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-17">
        <h2 class="window-header"><div class="text"><span>Quest√£o 17</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=17=---------------------------->
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-18">
        <h2 class="window-header"><div class="text"><span>Quest√£o 18</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=18=---------------------------->
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-19">
        <h2 class="window-header"><div class="text"><span>Quest√£o 19</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=19=---------------------------->
        </div>
    </div>

    <div class="window" style="width:640px;height:480px;" id="q-20">
        <h2 class="window-header"><div class="text"><span>Quest√£o 20</span></div> <button class="close"></button></h2>
        <div class="window-content">
            <!-- Conte√∫do da janela -------------------------=20=---------------------------->
        </div>
    </div>

    <button class="desktop-icon" onclick="openWindow('f-1-4')">
        <img src="icons/w98_directory_open_file_mydocs.ico" alt="file lines">
        Quest√µes 1-3
    </button>
    <div class="window" style="width:640px;height:480px;" id="f-1-4">
        <h2 class="window-header"><div class="text"><span>Quest√µes 1-3</span></div> <button class="close"></button></h2>
        <div class="window-content-folder">

            <button class="desktop-icon" onclick="openWindow('q-1')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 1
            </button>

            <button class="desktop-icon" onclick="openWindow('q-2')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 2
            </button>

            <button class="desktop-icon" onclick="openWindow('q-3')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 3
            </button>

        </div>

    </div>

    <button class="desktop-icon" onclick="openWindow('f-4-6')">
        <img src="icons/w98_directory_open_file_mydocs.ico" alt="file lines">
        Quest√µes 4-5
    </button>
    <div class="window" style="width:640px;height:480px;" id="f-4-6">
        <h2 class="window-header"><div class="text"><span>Quest√µes 4-5</span></div> <button class="close"></button></h2>
        <div class="window-content-folder">

            <button class="desktop-icon" onclick="openWindow('q-4')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 4
            </button>

            <button class="desktop-icon" onclick="openWindow('q-5')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 5
            </button>

        </div>

    </div>

    <button class="desktop-icon" onclick="openWindow('q-6')">
        <img src="icons/w98_file_lines.ico" alt="file lines">
        Quest√£o 6
    </button>

    <button class="desktop-icon" onclick="openWindow('q-7')">
        <img src="icons/w98_file_lines.ico" alt="file lines">
        Quest√£o 7
    </button>

    <button class="desktop-icon" onclick="openWindow('q-8')">
        <img src="icons/w98_file_lines.ico" alt="file lines">
        Quest√£o 8
    </button>

    <button class="desktop-icon" onclick="openWindow('f-9-12')">
        <img src="icons/w98_directory_open_file_mydocs.ico" alt="file lines">
        Quest√µes 9-11
    </button>
    <div class="window" style="width:640px;height:480px;" id="f-9-12">
        <h2 class="window-header"><div class="text"><span>Quest√µes 9-11</span></div> <button class="close"></button></h2>
        <div class="window-content-folder">

            <button class="desktop-icon" onclick="openWindow('q-9')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 9
            </button>

            <button class="desktop-icon" onclick="openWindow('q-1011')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 10-11
            </button>

        </div>

    </div>

    <button class="desktop-icon" onclick="openWindow('f-12-17')">
        <img src="icons/w98_directory_open_file_mydocs.ico" alt="file lines">
        Quest√µes 12-16
    </button>
    <div class="window" style="width:640px;height:480px;" id="f-12-17">
        <h2 class="window-header"><div class="text"><span>Quest√µes 12-16</span></div> <button class="close"></button></h2>
        <div class="window-content-folder">

            <button class="desktop-icon" onclick="openWindow('q-12')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 12
            </button>

            <button class="desktop-icon" onclick="openWindow('q-13')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 13
            </button>

            <button class="desktop-icon" onclick="openWindow('q-14')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 14
            </button>

            <button class="desktop-icon" onclick="openWindow('q-15')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 15
            </button>

            <button class="desktop-icon" onclick="openWindow('q-16')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 16
            </button>

        </div>

    </div>

    <button class="desktop-icon" onclick="openWindow('f-17-19')">
        <img src="icons/w98_directory_open_file_mydocs.ico" alt="file lines">
        Quest√µes 17-19
    </button>
    <div class="window" style="width:640px;height:480px;" id="f-17-19">
        <h2 class="window-header"><div class="text"><span>Quest√µes 17-19</span></div> <button class="close"></button></h2>
        <div class="window-content-folder">

            <button class="desktop-icon" onclick="openWindow('q-17')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 17
            </button>

            <button class="desktop-icon" onclick="openWindow('q-18')">
                <img src="icons/w98_file_lines.ico" alt="file lines">
                Quest√£o 18
            </button>

        </div>

    </div>

    <button class="desktop-icon" onclick="openWindow('q-20')">
        <img src="icons/w98_file_lines.ico" alt="file lines">
        Quest√£o 20
    </button>


</main>
</body>
</html>